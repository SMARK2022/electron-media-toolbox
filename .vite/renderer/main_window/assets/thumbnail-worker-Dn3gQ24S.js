(function(){"use strict";const u=(n,r)=>{const e=new Uint8Array(n.byteLength+r.byteLength);return e.set(new Uint8Array(n),0),e.set(new Uint8Array(r),n.byteLength),e},d=async n=>{var l;const e=(await fetch(n)).body.getReader();let o=await e.read(),a,c,t,i;for(;!o.done;){const{value:h}=o;t=t?u(t,h):new Uint8Array(h);for(let s=a?a+1:2,b=t.length;s<b;s++)if(t[s]===255){if(!a&&t[s+1]===216){a=s;continue}a&&t[s+1]===217&&(c=s+2)}if(a&&c){i=t.subarray(a,c),e.cancel("Thumbnail found");break}if(t.length>8e4){e.cancel("Thumbnail not found");break}o=await e.read()}return(l=new Response(i))==null?void 0:l.blob()};onmessage=n=>{const{path:r}=n.data;d(r).then(e=>{postMessage({blob:e})}).catch(e=>{console.error("Error processing EXIF thumbnail:",e),postMessage({error:e.message})})}})();
